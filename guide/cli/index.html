<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>CLI - BundleWrap</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-33891245-2', 'docs.bundlewrap.org');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">BundleWrap</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../.."><i class="fa fa-home"></i></a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guides <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../quickstart/">Quickstart</a>
</li>

                        
                            
<li >
    <a href="../installation/">Installation</a>
</li>

                        
                            
<li class="active">
    <a href="./">CLI</a>
</li>

                        
                            
<li >
    <a href="../env/">Environment Variables</a>
</li>

                        
                            
<li >
    <a href="../item_file_templates/">File templates</a>
</li>

                        
                            
<li >
    <a href="../secrets/">Handling secrets</a>
</li>

                        
                            
<li >
    <a href="../dev_item/">Custom items</a>
</li>

                        
                            
<li >
    <a href="../dev_plugin/">Writing plugins</a>
</li>

                        
                            
<li >
    <a href="../api/">Python API</a>
</li>

                        
                            
<li >
    <a href="../migrate_12/">Migrating to 2.0</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Repository <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../repo/layout/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../repo/nodes.py/">nodes.py</a>
</li>

                        
                            
<li >
    <a href="../../repo/groups.py/">groups.py</a>
</li>

                        
                            
<li >
    <a href="../../repo/requirements.txt/">requirements.txt</a>
</li>

                        
                            
<li >
    <a href="../../repo/bundles/">bundles/</a>
</li>

                        
                            
<li >
    <a href="../../repo/hooks/">hooks/</a>
</li>

                        
                            
<li >
    <a href="../../repo/libs/">libs/</a>
</li>

                        
                            
<li >
    <a href="../../repo/plugins/">Plugins</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Items <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../items/action/">action</a>
</li>

                        
                            
<li >
    <a href="../../items/directory/">directory</a>
</li>

                        
                            
<li >
    <a href="../../items/file/">file</a>
</li>

                        
                            
<li >
    <a href="../../items/group/">group</a>
</li>

                        
                            
<li >
    <a href="../../items/pkg_apt/">pkg_apt</a>
</li>

                        
                            
<li >
    <a href="../../items/pkg_pacman/">pkg_pacman</a>
</li>

                        
                            
<li >
    <a href="../../items/pkg_pip/">pkg_pip</a>
</li>

                        
                            
<li >
    <a href="../../items/pkg_yum/">pkg_yum</a>
</li>

                        
                            
<li >
    <a href="../../items/pkg_zypper/">pkg_zypper</a>
</li>

                        
                            
<li >
    <a href="../../items/postgres_db/">postgres_db</a>
</li>

                        
                            
<li >
    <a href="../../items/postgres_role/">postgres_role</a>
</li>

                        
                            
<li >
    <a href="../../items/svc_systemd/">svc_systemd</a>
</li>

                        
                            
<li >
    <a href="../../items/svc_systemv/">svc_systemv</a>
</li>

                        
                            
<li >
    <a href="../../items/svc_upstart/">svc_upstart</a>
</li>

                        
                            
<li >
    <a href="../../items/symlink/">symlink</a>
</li>

                        
                            
<li >
    <a href="../../items/user/">user</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Misc <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../misc/about/">About</a>
</li>

                        
                            
<li >
    <a href="../../misc/glossary/">Glossary</a>
</li>

                        
                            
<li >
    <a href="../../misc/faq/">FAQ</a>
</li>

                        
                            
<li >
    <a href="../../misc/alternatives/">Alternatives</a>
</li>

                        
                            
<li >
    <a href="../../misc/contributing/">Contributing</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../installation/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../env/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/bundlewrap/bundlewrap">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#command-line-interface">Command Line Interface</a></li>
        
            <li class="second-level"><a href="#bw-apply">bw apply</a></li>
            
        
            <li class="second-level"><a href="#bw-run">bw run</a></li>
            
        
            <li class="second-level"><a href="#bw-nodes-and-bw-groups">bw nodes and bw groups</a></li>
            
        
            <li class="second-level"><a href="#bw-debug">bw debug</a></li>
            
        
            <li class="second-level"><a href="#bw-plot">bw plot</a></li>
            
        
            <li class="second-level"><a href="#bw-test">bw test</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="command-line-interface">Command Line Interface</h1>
<p>The <code>bw</code> utility is BundleWrap's command line interface.</p>
<div class="alert">This page is not meant as a complete reference. It provides a starting point to explore the various subcommands. If you're looking for details, <code>--help</code> is your friend.</div>

<h2 id="bw-apply">bw apply</h2>
<pre><code class="nohighlight">bw apply -i mynode</code></pre>

<p>The most important and most used part of BundleWrap, <code>bw apply</code> will apply your configuration to a set of <a href="../../repo/nodes.py/">nodes</a>. By default, it operates in a non-interactive mode. When you're trying something new or are otherwise unsure of some changes, use the <code>-i</code> switch to have BundleWrap interactively ask before each change is made.</p>
<p><br></p>
<h2 id="bw-run">bw run</h2>
<pre><code class="nohighlight">$ bw run mygroup "uname -a"</code></pre>

<p>Unsurprisingly, the <code>run</code> subcommand is used to run commands on nodes.</p>
<p>As with most commands that accept node names, you can also give a <code>group</code> name or any combination of node and group names, separated by commas (without spaces, e.g. <code>node1,group2,node3</code>). A third option is to use a bundle selector like <code>bundle:my_bundle</code>. It will select all nodes with the named <code>bundle</code>. You can freely mix and match node names, group names, and bundle selectors.</p>
<p>Negation is also possible for bundles and groups. <code>!bundle:foo</code> will add all nodes without the foo bundle, while <code>!group:foo</code> will add all nodes that aren't in the foo group.</p>
<p><br></p>
<h2 id="bw-nodes-and-bw-groups">bw nodes and bw groups</h2>
<pre><code class="nohighlight">$ bw nodes --hostnames | xargs -n 1 ping -c 1</code></pre>

<p>With these commands you can quickly get a list of all nodes and groups in your <a href="../../repo/layout/">repository</a>. The example above uses <code>--hostnames</code> to get a list of all DNS names for your nodes and send a ping to each one.</p>
<p><br></p>
<h2 id="bw-debug">bw debug</h2>
<pre><code>$ bw debug
bundlewrap X.Y.Z interactive repository inspector
&gt; You can access the current repository as 'repo'.
&gt;&gt;&gt; len(repo.nodes)
121
</code></pre>
<p>This command will drop you into a Python shell with direct access to BundleWrap's <a href="../api/">API</a>. Once you're familiar with it, it can be a very powerful tool.</p>
<p><br></p>
<h2 id="bw-plot">bw plot</h2>
<div class="alert alert-info">You'll need <a href="http://www.graphviz.org">Graphviz</a> installed on your machine for this to be useful.</div>

<pre><code class="nohighlight">$ bw plot node mynode | dot -Tsvg -omynode.svg</code></pre>

<p>You won't be using this every day, but it's pretty cool. The above command will create an SVG file (you can open these in your browser) that shows the item dependency graph for the given node. You will see bundles as dashed rectangles, static dependencies (defined in BundleWrap itself) in green, auto-generated dependencies (calculated dynamically each time you run <code>bw apply</code>) in blue and dependencies you defined yourself in red.</p>
<p>It offers an interesting view into the internal complexities BundleWrap has to deal with when figuring out the order in which your items can be applied to your node.</p>
<p><br></p>
<h2 id="bw-test">bw test</h2>
<pre><code class="nohighlight">$ bw test
✓ node1  samba  pkg_apt:samba
✘ node1  samba  file:/etc/samba/smb.conf

[...]

+----- traceback from worker ------
|
|  Traceback (most recent call last):
|    File "bundlewrap/concurrency.py", line 78, in _worker_process
|      return_value = target(*msg['args'], **msg['kwargs'])
|    File "&lt;string&gt;", line 378, in test
|  BundleError: file:/etc/samba/smb.conf from bundle 'samba' refers to missing file '/path/to/bundlewrap/repo/bundles/samba/files/smb.conf'
|
+----------------------------------
</pre>

<p></code>
This command is meant to be run automatically like a test suite after every commit. It will try to catch any errors in your bundles and file templates by initializing every item for every node (but without touching the network).</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>BundleWrap is published under the <a href='https://github.com/bundlewrap/bundlewrap/blob/master/LICENSE'>GPL license</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
